# Как работать со сборщиком

Сборщик предназначен для сборки вспомогательных файлов (css, js, графики, шрифтов и пр) при разработке темы на CMS WordPress.

## Начало работы

Для работы с данной сборкой в новом проекте, склонируйте все содержимое репозитория в директорию с темой.

> !!!Не копируйте файлы сборщика в корень темы. Файлы сборщика должны быть в своей директории, например, __ПАПКА ТЕМЫ/wp-dev/__`

Затем, перейдите в директорию со сборщиком, запустите команду `npm i`, которая установит все находящиеся в __package.json__ зависимости.<br>
После этого вы можете использовать npm-команды для сборки, итоговые файлы попадают в директорию __assets__, расположенную в корневой директории темы (т.е. на уровень выше директории сборщика)

## Оглавление
1. [npm-команды](#npm-команды)
2. [Работа с CSS](#работа-с-css)
3. [Работа с JavaScript](#работа-с-javascript)
4. [Работа с изображениями](#работа-с-изображениями)


## npm-команды

`npm start` - базовая команда, которая запускает сборку в режиме "для разработки", запуская сервер `browser-sync`.

`npm run build` - команда для сборки проекта. Разметка форматируется. CSS, JS и изображения минифицируются. Сервер `browser-sync` не запускается.

`npm run final` - команда, аналогичная команде `npm run build` + проверка линтерами js и scss кода перед сборкой.

`npm run lint` - команда, проверяющая проект линтерами.

`npm run eslint` - команда, проверяющая js код проекта.

`npm run stylelint` - команда, проверяющая scss код проекта.

## Работа с CSS

В сборке используется препроцессор __sass__ в синтаксисе __scss__. Все стили проекта хранятся в директории __style__.

Чтобы подключить сторонние файлы стилей (библиотеки) просто скопируйте их в директорию __src/vendor__. Создайте директорию, соответствующую библиотеке и реализуйте импорт, используюя инструменты __scss__. Можно добавить библиотеки из npm через инструмент import в JS.

## Работа с JavaScript

Файл __main.js__ используется как точка входа.

> JS-код лучше делить на модули - небольшие js-файлы, которые содержат свою, изолированную друг от друга реализацию. Сами модули помещайте в директорию __modules__.

Чтобы подключить сторонние js-файлы (библиотеки) просто скопируйте их в директорию __src/vendor__ . Создайте директорию, соответствующую библиотеке, либо, если планируется подключение из директории __src/js/**__, подключите через import в файл __main.js__ . Можно добавить библиотеки из npm через инструмент import. Сборка соберет все js файлы библиотек, сделает из них общий бандл и подключит в проект.

## Работа с изображениями

Файлы графики копируются в директорию __img__.

Файлы графики, которые будут обрабатываться через scss (например, через свойство background-image) копируются в директорию __img/static__. Эти файлы будет обрабатывать webpack.

Если вам нужно сделать svg-спрайт, кладите нужные для спрайта svg-файлы в директорию __img/sprite__.

При использовании команд  `npm run static` или `npm run build`, вы получите минифицированные изображения в итоговой директории __/assets/img__, расположенной в корневой директории темы. Все файлы обработынные webpack'ом будут в корне этой директории, остальные скопируются из исходников с созданной структурой.